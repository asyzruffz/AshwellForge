@page "/streams/preview"
@using AshwellForge.Admin.Utils
@inject NavigationManager NavigationManager

<PageContainer Title="Stream Preview">
    <PageContent>
        <MudPaper Width="100%">
            <StreamVideoPlayer Url="@StreamUrl" />
        </MudPaper>
    </PageContent>
</PageContainer>

@code {
    public string? StreamPath { get; set; }

    public string StreamUrl => $"{NavigationManager.BaseUri}{StreamPath}.flv";

    protected override void OnParametersSet()
    {
        var uri = NavigationManager.ToAbsoluteUri(NavigationManager.Uri);
        var parameters = UrlQueryString.From(uri.Query);

        StreamPath = parameters.Get("StreamPath");
    }
}
